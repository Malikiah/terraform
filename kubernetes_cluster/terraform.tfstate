{
  "version": 4,
  "terraform_version": "0.12.21",
  "serial": 241,
  "lineage": "67ce16b0-ff97-4d5f-bda0-0952ef6139df",
  "outputs": {},
  "resources": [
    {
      "module": "module.nfs",
      "mode": "data",
      "type": "digitalocean_ssh_key",
      "name": "malikiah",
      "provider": "module.nfs.provider.digitalocean",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "fingerprint": "05:ea:d9:de:d0:26:e0:3a:22:da:58:d6:1b:de:ef:aa",
            "id": "26681624",
            "name": "malikiah",
            "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC23V501EGqEiOv9PKi74QZIY6nMFzDaiLJs/YXIc8+IxqnjF73ZlyMBCLME4kzHq1Hnea0QHuxWP3qNgcFHF64WW0j4ClCg2qYDlrTzvjuk+qY3uRGURsMCYwl3rU+6nSBn21S+bF0iIsHqufvfDbdyvZyZbkmLAl/rh+w/qkykp/8Vnf8GhLEjvQwIed+xQzctTw90MW4BLJlbJmLSG2QYI00N8wAPYhNr0aj5t/nvwf60pJo3rbpCFc8janaoZ6AZlZ0Z3gVM5ceoZW5u5JOYpx7SGfOjFj8VKkLNZG40BkndyyaMoE6j+ZTEQO7AiBpS3jFQudwDJXeXD3hGfqafRfNmMhXz7ycXsgHcQtEGI94AulbbINLZYph/69o8sl39/ze9K7GlpeGONW7kyUrQEs/fNkdHtdQ6FutLNPLLmfErGzU9BYjMZMsSkMNhHQyXmPhYyqKNQIdhFTNPJL0VEQTXjzG+LrshXc7iSQwV4/dUutCSSutJC+UoYh5wNzp4ozegHjlMJmGWlOJm5e/iWZBwnnjL2z2rNhB0xAV2u2fWd8CaU2mUlQyXYQhiNkWyQmTngp0LyNywp4aVx5P/4XQXAERhlP1EOoXPCO3mHZszwUegYXAhj/qQqb65SwPkkUmv3Eg0mw1kIsP+p4l+0Axx00y47khOS9zVDEAGQ=="
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "digitalocean_ssh_key",
      "name": "malikiah",
      "provider": "provider.digitalocean",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "fingerprint": "05:ea:d9:de:d0:26:e0:3a:22:da:58:d6:1b:de:ef:aa",
            "id": "26681624",
            "name": "malikiah",
            "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC23V501EGqEiOv9PKi74QZIY6nMFzDaiLJs/YXIc8+IxqnjF73ZlyMBCLME4kzHq1Hnea0QHuxWP3qNgcFHF64WW0j4ClCg2qYDlrTzvjuk+qY3uRGURsMCYwl3rU+6nSBn21S+bF0iIsHqufvfDbdyvZyZbkmLAl/rh+w/qkykp/8Vnf8GhLEjvQwIed+xQzctTw90MW4BLJlbJmLSG2QYI00N8wAPYhNr0aj5t/nvwf60pJo3rbpCFc8janaoZ6AZlZ0Z3gVM5ceoZW5u5JOYpx7SGfOjFj8VKkLNZG40BkndyyaMoE6j+ZTEQO7AiBpS3jFQudwDJXeXD3hGfqafRfNmMhXz7ycXsgHcQtEGI94AulbbINLZYph/69o8sl39/ze9K7GlpeGONW7kyUrQEs/fNkdHtdQ6FutLNPLLmfErGzU9BYjMZMsSkMNhHQyXmPhYyqKNQIdhFTNPJL0VEQTXjzG+LrshXc7iSQwV4/dUutCSSutJC+UoYh5wNzp4ozegHjlMJmGWlOJm5e/iWZBwnnjL2z2rNhB0xAV2u2fWd8CaU2mUlQyXYQhiNkWyQmTngp0LyNywp4aVx5P/4XQXAERhlP1EOoXPCO3mHZszwUegYXAhj/qQqb65SwPkkUmv3Eg0mw1kIsP+p4l+0Axx00y47khOS9zVDEAGQ=="
          }
        }
      ]
    },
    {
      "module": "module.nfs",
      "mode": "data",
      "type": "digitalocean_volume",
      "name": "nfs-volume-sfo2-01",
      "provider": "module.nfs.provider.digitalocean",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": null,
            "droplet_ids": [
              191654827
            ],
            "filesystem_label": null,
            "filesystem_type": "ext4",
            "id": "462d1c35-7372-11ea-9c7b-0a58ac1422d3",
            "name": "nfs-volume-sfo2-01",
            "region": "sfo2",
            "size": 10,
            "tags": [],
            "urn": "do:volume:462d1c35-7372-11ea-9c7b-0a58ac1422d3"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "digitalocean_volume",
      "name": "nfs-volume-sfo2-01",
      "provider": "provider.digitalocean",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": null,
            "droplet_ids": [
              191654827
            ],
            "filesystem_label": null,
            "filesystem_type": "ext4",
            "id": "462d1c35-7372-11ea-9c7b-0a58ac1422d3",
            "name": "nfs-volume-sfo2-01",
            "region": "sfo2",
            "size": 10,
            "tags": [],
            "urn": "do:volume:462d1c35-7372-11ea-9c7b-0a58ac1422d3"
          }
        }
      ]
    },
    {
      "mode": "data",
      "type": "template_file",
      "name": "inventory",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "0e1bf8c3b42a16655cb4e8a3297fac65deeb978035baaf69c127ca36bb9f0499",
            "rendered": "[all:vars]\ndeployment_state = staging\nansible_python_interpreter  = /usr/bin/python3\nansible_user = root\nansible_ssh_private_key_file = ~/.ssh/id_rsa\nadmin_email = root@localhost\nnfs_domain = nfs.artace.io\nnfs_path = /data/nfs4\nnextcloud_domain = cloud.artace.io\n\n\n[master_nodes]\nsfo2-master-node-01 ansible_host=165.227.62.157\n\n\n[worker_nodes]\nsfo2-worker-node-01 ansible_host=159.89.143.126\n\n[nfs_nodes]\nsfo2-nfs-node-01 ansible_host=157.245.174.111\n\n[nodes]\nsfo2-master-node-01 ansible_host=165.227.62.157\nsfo2-worker-node-01 ansible_host=159.89.143.126\nsfo2-nfs-node-01 ansible_host=157.245.174.111",
            "template": "[all:vars]\ndeployment_state = ${deployment_state}\nansible_python_interpreter  = /usr/bin/python3\nansible_user = ${ssh_user}\nansible_ssh_private_key_file = ${ssh_key}\nadmin_email = ${admin_email}\nnfs_domain = ${nfs_domain}\nnfs_path = ${nfs_path}\nnextcloud_domain = ${nextcloud_domain}\n\n\n[master_nodes]\n${master_nodes}\n\n\n[worker_nodes]\n${worker_nodes}\n\n[nfs_nodes]\n${nfs_nodes}\n\n[nodes]\n${master_nodes}\n${worker_nodes}\n${nfs_nodes}",
            "vars": {
              "admin_email": "root@localhost",
              "deployment_state": "staging",
              "master_nodes": "sfo2-master-node-01 ansible_host=165.227.62.157",
              "nextcloud_domain": "cloud.artace.io",
              "nfs_domain": "nfs.artace.io",
              "nfs_nodes": "sfo2-nfs-node-01 ansible_host=157.245.174.111",
              "nfs_path": "/data/nfs4",
              "ssh_key": "~/.ssh/id_rsa",
              "ssh_user": "root",
              "worker_nodes": "sfo2-worker-node-01 ansible_host=159.89.143.126"
            }
          }
        }
      ]
    },
    {
      "mode": "managed",
      "type": "digitalocean_domain",
      "name": "domains",
      "each": "list",
      "provider": "provider.digitalocean",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "cloud.artace.io",
            "ip_address": "167.172.11.110",
            "name": "cloud.artace.io",
            "urn": "do:domain:cloud.artace.io"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "digitalocean_droplet.master",
            "digitalocean_droplet.worker",
            "digitalocean_loadbalancer.public"
          ]
        }
      ]
    },
    {
      "module": "module.nfs",
      "mode": "managed",
      "type": "digitalocean_domain",
      "name": "nfs_domain",
      "provider": "module.nfs.provider.digitalocean",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "nfs.artace.io",
            "ip_address": "157.245.174.111",
            "name": "nfs.artace.io",
            "urn": "do:domain:nfs.artace.io"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.nfs.digitalocean_droplet.nfs"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "digitalocean_droplet",
      "name": "master",
      "each": "list",
      "provider": "provider.digitalocean",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "backups": false,
            "created_at": "2020-05-09T21:24:44Z",
            "disk": 60,
            "id": "191654829",
            "image": "fedora-30-x64",
            "ipv4_address": "165.227.62.157",
            "ipv4_address_private": "",
            "ipv6": false,
            "ipv6_address": "",
            "ipv6_address_private": null,
            "locked": false,
            "memory": 2048,
            "monitoring": false,
            "name": "sfo2-master-node-01",
            "price_hourly": 0.02232,
            "price_monthly": 15,
            "private_networking": false,
            "region": "sfo2",
            "resize_disk": true,
            "size": "s-2vcpu-2gb",
            "ssh_keys": [
              "26681624"
            ],
            "status": "active",
            "tags": [
              "fedora-30-x64",
              "k8s",
              "master"
            ],
            "urn": "do:droplet:191654829",
            "user_data": null,
            "vcpus": 2,
            "volume_ids": [],
            "vpc_uuid": ""
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.nfs",
      "mode": "managed",
      "type": "digitalocean_droplet",
      "name": "nfs",
      "each": "list",
      "provider": "module.nfs.provider.digitalocean",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "backups": false,
            "created_at": "2020-05-09T21:24:44Z",
            "disk": 80,
            "id": "191654827",
            "image": "fedora-30-x64",
            "ipv4_address": "157.245.174.111",
            "ipv4_address_private": "",
            "ipv6": false,
            "ipv6_address": "",
            "ipv6_address_private": null,
            "locked": false,
            "memory": 4096,
            "monitoring": false,
            "name": "sfo2-nfs-node-01",
            "price_hourly": 0.02976,
            "price_monthly": 20,
            "private_networking": false,
            "region": "sfo2",
            "resize_disk": true,
            "size": "s-2vcpu-4gb",
            "ssh_keys": [
              "26681624"
            ],
            "status": "active",
            "tags": [
              "fedora-30-x64",
              "nfs"
            ],
            "urn": "do:droplet:191654827",
            "user_data": null,
            "vcpus": 2,
            "volume_ids": [
              "462d1c35-7372-11ea-9c7b-0a58ac1422d3"
            ],
            "vpc_uuid": ""
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "digitalocean_droplet",
      "name": "worker",
      "each": "list",
      "provider": "provider.digitalocean",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "backups": false,
            "created_at": "2020-05-09T21:24:44Z",
            "disk": 80,
            "id": "191654828",
            "image": "fedora-30-x64",
            "ipv4_address": "159.89.143.126",
            "ipv4_address_private": "",
            "ipv6": false,
            "ipv6_address": "",
            "ipv6_address_private": null,
            "locked": false,
            "memory": 4096,
            "monitoring": false,
            "name": "sfo2-worker-node-01",
            "price_hourly": 0.02976,
            "price_monthly": 20,
            "private_networking": false,
            "region": "sfo2",
            "resize_disk": true,
            "size": "s-2vcpu-4gb",
            "ssh_keys": [
              "26681624"
            ],
            "status": "active",
            "tags": [
              "fedora-30-x64",
              "k8s",
              "worker"
            ],
            "urn": "do:droplet:191654828",
            "user_data": null,
            "vcpus": 2,
            "volume_ids": [],
            "vpc_uuid": ""
          },
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "digitalocean_loadbalancer",
      "name": "public",
      "provider": "provider.digitalocean",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "algorithm": "round_robin",
            "droplet_ids": [
              191654828
            ],
            "droplet_tag": "",
            "enable_proxy_protocol": false,
            "forwarding_rule": [
              {
                "certificate_id": "",
                "entry_port": 443,
                "entry_protocol": "https",
                "target_port": 30443,
                "target_protocol": "https",
                "tls_passthrough": true
              },
              {
                "certificate_id": "",
                "entry_port": 80,
                "entry_protocol": "http",
                "target_port": 30080,
                "target_protocol": "http",
                "tls_passthrough": false
              }
            ],
            "healthcheck": [
              {
                "check_interval_seconds": 10,
                "healthy_threshold": 5,
                "path": "/healthz",
                "port": 30080,
                "protocol": "http",
                "response_timeout_seconds": 5,
                "unhealthy_threshold": 3
              }
            ],
            "id": "aa9cb0de-29b9-4e41-9e39-b7742c1d7ba8",
            "ip": "167.172.11.110",
            "name": "sfo2-loadbalancer-01",
            "redirect_http_to_https": false,
            "region": "sfo2",
            "status": "active",
            "sticky_sessions": [
              {
                "cookie_name": "",
                "cookie_ttl_seconds": 0,
                "type": "none"
              }
            ],
            "urn": "do:loadbalancer:aa9cb0de-29b9-4e41-9e39-b7742c1d7ba8",
            "vpc_uuid": "5560a770-dc85-11e8-9f23-3cfdfea9fff1"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "digitalocean_droplet.master",
            "digitalocean_droplet.worker"
          ]
        }
      ]
    },
    {
      "module": "module.nfs",
      "mode": "managed",
      "type": "digitalocean_volume_attachment",
      "name": "nfs-volume-sfo2-01",
      "provider": "module.nfs.provider.digitalocean",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "droplet_id": 191654827,
            "id": "191654827-462d1c35-7372-11ea-9c7b-0a58ac1422d3-20200509212529666500000001",
            "volume_id": "462d1c35-7372-11ea-9c7b-0a58ac1422d3"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.nfs.digitalocean_droplet.nfs"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "cmd",
      "provider": "provider.null",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "8823467659067261704",
            "triggers": {
              "template_rendered": "[all:vars]\ndeployment_state = staging\nansible_python_interpreter  = /usr/bin/python3\nansible_user = root\nansible_ssh_private_key_file = ~/.ssh/id_rsa\nadmin_email = root@localhost\nnfs_domain = nfs.artace.io\nnfs_path = /data/nfs4\nnextcloud_domain = cloud.artace.io\n\n\n[master_nodes]\nsfo2-master-node-01 ansible_host=165.227.62.157\n\n\n[worker_nodes]\nsfo2-worker-node-01 ansible_host=159.89.143.126\n\n[nfs_nodes]\nsfo2-nfs-node-01 ansible_host=157.245.174.111\n\n[nodes]\nsfo2-master-node-01 ansible_host=165.227.62.157\nsfo2-worker-node-01 ansible_host=159.89.143.126\nsfo2-nfs-node-01 ansible_host=157.245.174.111"
            }
          },
          "private": "bnVsbA==",
          "dependencies": [
            "digitalocean_droplet.master",
            "digitalocean_droplet.worker",
            "module.nfs.digitalocean_domain.nfs_domain",
            "module.nfs.digitalocean_droplet.nfs",
            "module.nfs.digitalocean_volume_attachment.nfs-volume-sfo2-01"
          ]
        }
      ]
    }
  ]
}
